# 합격자 관리 화면 (AMS-SCR-006)

## 사용 역할자: 입학처 담당자, 시스템 관리자

---

## 기능 1: 합격자 데이터 조회 및 관리

-   **관련 요구사항:** AMS-REQ-015: 합격자 데이터 관리·보정
-   **입력 정보:**
    -   조회 조건 선택 (모집 시기, 전형, 모집 단위, 합격 상태 - 최초합/충원합/예비 등).
    -   '조회' 버튼 클릭.
    -   (보정 시) 수정할 합격자 정보 필드 입력 (단, 매우 제한적이어야 함. 예: 연락처 오류 수정 등).
    -   '수정 내용 저장' 버튼 클릭.
-   **출력 정보:**
    -   조건에 맞는 합격자(최초합, 예비, 충원합 포함) 목록 테이블 (수험번호, 이름, 합격 구분, 예비 순위, 등록 상태 등).
    -   총 합격자 수, 예비자 수 등 요약 정보.
    -   보정 성공/실패 메시지.
-   **프로세스 설명:**
    1.  사용자가 조회 조건을 설정하고 '조회' 버튼을 클릭한다.
    2.  클라이언트는 조건을 API로 전송하여 확정된 합격/예비자 목록 (`ADMISSION_DECISION` 테이블 기반)을 조회한다.
    3.  서버는 조회 결과를 반환하고, 클라이언트는 테이블에 표시한다. 등록 상태(`PAYMENT` 테이블 연동)도 함께 표시될 수 있다.
    4.  (보정) 관리자가 특정 합격자의 정보(예: 연락처 등 비민감 정보) 수정이 필요한 경우, 수정 후 저장 버튼을 클릭한다. (사정 결과 자체 변경 불가 원칙)
    5.  클라이언트는 수정 내용을 API로 전송하고, 서버는 해당 데이터를 업데이트(변경 이력 기록 필수)하고 결과를 반환한다.
-   **호출 API 정보:**
    -   조회 API:
        -   HTTP 메서드: GET
        -   API 엔드포인트: `/api/ams/passers`
        -   요청 파라미터: 조회 조건 (`admissionRound`, `decisionResult` 등)
        -   응답 파라미터: 합격/예비자 목록
            ```json
            [
              {
                "applicationId": 1001, "applicantId": "2024S0001", "name": "홍길동",
                "decisionResult": "최초합", "preliminaryRank": null,
                "registrationStatus": "미납" // PAYMENT 연동
              },
              {
                "applicationId": 1025, "applicantId": "2024S0025", "name": "김예비",
                "decisionResult": "예비", "preliminaryRank": 1,
                "registrationStatus": null
              }, ...
            ]
            ```
    -   보정 API:
        -   HTTP 메서드: PUT
        -   API 엔드포인트: `/api/ams/passers/{applicationId}/correction` (예시)
        -   요청 파라미터 (Path Variable): `applicationId`
        -   요청 파라미터 (Body): 수정할 필드와 값 (제한적 필드만 허용)
        -   응답 파라미터: 성공/실패 정보
-   **Mockup 데이터 예시:**
    -   입력 (조회): `/api/ams/passers?decisionResult=PASS`
    -   출력 (조회): 최초 합격자 목록 표시.
    -   입력 (보정): 특정 합격자 연락처 수정 후 저장.
    -   출력 (보정): "수정되었습니다." 메시지, 해당 합격자 정보 업데이트.

## 기능 2: 등록 업무 사전 데이터 가공 및 확인

-   **관련 요구사항:** AMS-REQ-016: 등록 업무 사전 데이터 가공 및 확인
-   **입력 정보:**
    -   대상자 선택 (최초 합격자 전체, 특정 그룹 등).
    -   '등록 데이터 생성' 또는 '가상계좌 생성 요청' 버튼 클릭.
    -   등록금액 확인 및 설정 (필요시 전형별/학과별 차등 적용).
-   **출력 정보:**
    -   등록 대상자 목록 및 등록금액, 가상계좌 발급 상태 표시.
    -   데이터 생성/가공 결과 메시지 (성공/실패, 처리 건수).
-   **프로세스 설명:**
    1.  합격자 발표 후, 등록금 수납을 위해 담당자가 등록 대상자 데이터를 준비한다.
    2.  대상자를 선택하고 등록금액 확인/설정 후 '데이터 생성' 등의 버튼을 클릭한다.
    3.  클라이언트는 해당 요청(대상자 목록, 등록금 정보 등)을 API로 전송한다.
    4.  서버는 이 정보를 바탕으로 FRS(등록금 수납 시스템)와 연계할 데이터를 생성/준비한다. 이는 가상계좌 발급 요청 데이터 생성, `PAYMENT` 테이블 초기 레코드 생성 등을 포함할 수 있다.
    5.  처리 결과를 클라이언트에 반환하여 화면에 상태를 업데이트하고 메시지를 표시한다. (실제 가상계좌 발급은 FRS 시스템에서 수행)
-   **호출 API 정보:**
    -   HTTP 메서드: POST
    -   API 엔드포인트: `/api/ams/registration/prepare-data`
    -   API 목적: 등록 대상자 데이터 생성 및 FRS 연계 준비
    -   요청 파라미터 (Body): 대상자 ID 목록, 등록금 정보 등
        ```json
        {
          "applicationIds": [1001, 1003, ...],
          "amountDue": 4500000, // 일괄 적용 또는 개별 설정
          "dueDate": "2024-08-18"
        }
        ```
    -   응답 파라미터: 처리 결과 (성공/실패, 처리 건수, FRS 요청 상태 등)
-   **Mockup 데이터 예시:**
    -   입력: 최초 합격자 전체 선택, 등록금액 입력 후 '데이터 생성' 클릭.
    -   출력: "등록 대상 데이터 생성이 완료되었습니다. 총 150건." 메시지. 합격자 목록에 등록금액 및 '가상계좌 발급 대기' 상태 표시.

## 기능 3: 합격자 개별 발표 설정

-   **관련 요구사항:** AMS-REQ-017: 합격자 개별 발표
-   **입력 정보:**
    -   발표 시작 일시 설정 (날짜 및 시간 선택).
    -   발표 대상 선택 (모집 시기, 전형 등).
    -   '발표 설정 저장' 또는 '발표 시작' 버튼 클릭.
-   **출력 정보:** 설정된 발표 시작 일시 표시. 발표 상태 표시 (예정, 진행중, 종료).
-   **프로세스 설명:**
    1.  담당자가 수험생이 개별적으로 합격 여부를 조회할 수 있도록 발표 시점 및 대상을 설정한다.
    2.  설정 내용을 저장하면, 서버는 해당 정보를 기록한다.
    3.  설정된 발표 시작 일시가 되면, 시스템은 수험생 포털 등에서 합격 여부 조회가 가능하도록 상태를 변경하거나 관련 기능을 활성화한다. (별도 수험생용 화면 필요)
-   **호출 API 정보:**
    -   HTTP 메서드: POST 또는 PUT
    -   API 엔드포인트: `/api/ams/announcements/settings`
    -   API 목적: 합격자 발표 일정 및 대상 설정
    -   요청 파라미터 (Body):
        ```json
        {
          "admissionRound": "2024 수시",
          "announcementDateTime": "2024-08-10T14:00:00",
          "targetTypes": ["학생부교과", "학생부종합"] // 발표 대상 전형
        }
        ```
    -   응답 파라미터: 설정 저장 결과 (성공/실패)
-   **Mockup 데이터 예시:**
    -   입력: 발표일시 및 대상 전형 설정 후 저장.
    -   출력: "합격자 발표 설정이 저장되었습니다. 발표 예정 시각: 2024-08-10 14:00" 메시지.

## 기능 4: 합격 관련 출력물 생성

-   **관련 요구사항:** AMS-REQ-018: 합격 관련 출력물 생성·관리
-   **입력 정보:**
    -   출력물 종류 선택 (합격증, 예비합격 통지서, 등록 안내문 등).
    -   출력 대상자 선택 (개별 선택, 전체 합격자, 특정 그룹).
    -   '출력' 또는 '다운로드' 버튼 클릭.
-   **출력 정보:** 선택한 종류의 문서가 생성되어 다운로드되거나 미리보기로 표시됨.
-   **프로세스 설명:** (사정 데이터 출력물 생성 프로세스와 유사)
    1.  사용자가 필요한 합격 관련 출력물을 선택하고 대상을 지정한다.
    2.  클라이언트는 요청 정보를 API로 전송한다.
    3.  서버는 DB에서 해당 합격자 정보를 조회하고, 미리 정의된 템플릿을 사용하여 문서를 생성한다.
    4.  생성된 파일을 클라이언트로 전송하여 다운로드한다.
-   **호출 API 정보:**
    -   HTTP 메서드: GET 또는 POST
    -   API 엔드포인트: `/api/ams/passers/reports/{reportType}` (예: `/api/ams/passers/reports/acceptance-letter`)
    -   API 목적: 합격 관련 문서 생성 및 다운로드
    -   요청 파라미터: `reportType` (Path Variable), 대상자 ID 목록 또는 조건 (Query Params/Body)
    -   응답 파라미터: 파일 스트림
-   **Mockup 데이터:** 없음 (파일 다운로드)

## 기능 5: 미달 시 이월선발 처리 설정

-   **관련 요구사항:** AMS-REQ-019: 미달 시 이월선발 처리
-   **입력 정보:**
    -   미달된 모집 단위 목록 확인.
    -   이월 처리 방식 선택 (다음 모집 시기로 이월, 정원 조정 등).
    -   이월 인원 입력 (필요시).
    -   '이월 처리 확정' 버튼 클릭.
-   **출력 정보:** 이월 처리 결과 요약 정보 표시. 해당 모집 단위의 상태 업데이트.
-   **프로세스 설명:**
    1.  최초 등록 마감 후, 시스템은 모집 단위별 미달 인원을 집계하여 표시한다.
    2.  담당자는 미달된 모집 단위에 대한 처리 방침(이월 등)을 결정하고 관련 정보를 입력한다.
    3.  '확정' 버튼을 클릭하면, 클라이언트는 해당 처리 내용을 API로 전송한다.
    4.  서버는 이월 처리 로직을 수행하고, 관련 데이터(모집 단위별 정원 정보 등)를 업데이트한다. (다음 모집 시기 계획에 반영될 수 있도록 데이터 기록)
    5.  처리 결과를 클라이언트에 반환한다.
-   **호출 API 정보:**
    -   HTTP 메서드: POST
    -   API 엔드포인트: `/api/ams/recruitment/carry-over`
    -   API 목적: 미달 인원 이월 처리 실행
    -   요청 파라미터 (Body): 이월 처리 대상 및 방식 정보
        ```json
        {
          "admissionRound": "2024 수시",
          "carryOverDetails": [
            { "departmentCode": "MATH", "shortfallCount": 3, "carryOverCount": 3, "targetRound": "2024 정시" }, ...
          ]
        }
        ```
    -   응답 파라미터: 처리 결과 (성공/실패)
-   **Mockup 데이터 예시:**
    -   입력: 미달된 수학과 3명 정시 이월 설정 후 확정.
    -   출력: "이월 처리가 완료되었습니다." 메시지.

---

