# 평가 관리 화면 (AMS-SCR-004)

## 사용 역할자: 입학처 담당자, 시스템 관리자

---

## 기능 1: 평가 기준 및 배점 관리

-   **관련 요구사항:** AMS-REQ-006 (수능/학생부 기반 평가 관리), AMS-REQ-007 (제출서류 평가요소 관리), AMS-REQ-009 (면접/실기 평가요소 관리 - 결과 반영 기준), AMS-REQ-011 (평가요소 배점 관리)
-   **입력 정보:**
    -   관리할 모집 시기/전형 선택.
    -   평가 단계 선택 (서류, 면접, 실기 등).
    -   평가 요소 추가/수정/삭제:
        -   평가 요소명 입력 (텍스트 필드).
        -   배점 입력 (숫자 필드).
        -   반영 비율 입력 (숫자 필드, %).
        -   (수능/학생부의 경우) 반영 과목, 영역, 가중치, 환산 공식 등 설정.
    -   '저장' 버튼 클릭.
-   **출력 정보:**
    -   선택된 모집 시기/전형/평가 단계의 평가 요소 및 배점 목록 표시 (테이블 형태).
    -   총 배점 합계 표시.
    -   저장 성공/실패 메시지.
-   **프로세스 설명:**
    1.  사용자가 관리할 대상(모집 시기, 전형, 평가 단계)을 선택한다.
    2.  해당 조건의 현재 설정된 평가 요소 및 배점 정보를 조회하여 화면에 표시한다. (API 호출)
    3.  사용자가 평가 요소를 추가, 수정(배점 변경 등), 삭제한다.
    4.  '저장' 버튼을 클릭하면, 변경된 평가 기준 정보를 API로 전송한다.
    5.  서버는 입력된 정보를 검증(총 배점 합계 등)하고, DB의 평가 기준 설정 테이블에 저장/업데이트한다.
    6.  결과를 클라이언트에 반환하고, 클라이언트는 화면을 갱신하고 메시지를 표시한다.
-   **호출 API 정보:**
    -   조회 API:
        -   HTTP 메서드: GET
        -   API 엔드포인트: `/api/ams/evaluations/settings`
        -   요청 파라미터: `admissionRound`, `admissionType`, `evaluationStage`
        -   응답 파라미터: 평가 요소 목록 (요소명, 배점, 반영비율 등)
    -   저장 API:
        -   HTTP 메서드: PUT 또는 POST
        -   API 엔드포인트: `/api/ams/evaluations/settings`
        -   요청 파라미터 (Body): 업데이트된 평가 요소 설정 정보 전체 또는 변경분
        ```json
        {
          "admissionRound": "2024 수시",
          "admissionType": "학생부종합",
          "evaluationStage": "서류",
          "items": [
            {"itemName": "학업역량", "score": 40, "weight": 40},
            {"itemName": "전공적합성", "score": 30, "weight": 30},
            {"itemName": "인성", "score": 20, "weight": 20},
            {"itemName": "발전가능성", "score": 10, "weight": 10}
          ],
          "totalScore": 100
        }
        ```
        -   응답 파라미터: 성공/실패 정보
-   **Mockup 데이터 예시:**
    -   입력 (조회): `/api/ams/evaluations/settings?admissionRound=2024S&admissionType=COMP&evaluationStage=DOC`
    -   출력 (조회 결과): 상기 JSON 응답 구조의 데이터가 화면 테이블에 표시됨.
    -   입력 (저장): 상기 JSON 요청 Body 전송.
    -   출력 (저장 결과): "저장되었습니다." 메시지 표시.

## 기능 2: 평가 결과 확인 및 보정

-   **관련 요구사항:** AMS-REQ-008: 평가 내용 확인 및 보정
-   **입력 정보:**
    -   확인/보정할 평가 대상 선택 (모집 시기, 전형, 평가 단계, 모집 단위 등 필터링).
    -   지원자 목록에서 특정 지원자 선택 또는 평가 결과 목록 조회.
    -   (보정 시) 수정할 점수 또는 평가 내용 입력.
    -   '보정 내용 저장' 버튼 클릭.
-   **출력 정보:**
    -   선택된 조건에 따른 지원자별 평가 결과 목록 (테이블 형태: 수험번호, 이름, 평가자, 평가 점수, 평가 의견, 상태 등).
    -   평가 점수 분포 현황 (차트 등 시각화 자료).
    -   보정 결과 반영 및 성공/실패 메시지.
-   **프로세스 설명:**
    1.  사용자가 조회 조건을 설정하여 평가 결과를 조회한다. (API 호출)
    2.  조회된 결과 목록에서 특정 지원자의 평가 내용을 확인한다.
    3.  보정이 필요한 경우, 해당 지원자의 점수나 평가 내용을 수정하고 '저장' 버튼을 클릭한다. (수정 권한 확인 필요)
    4.  클라이언트는 보정된 내용과 해당 평가 ID(`evaluationId`)를 API로 전송한다.
    5.  서버는 보정 내용을 DB의 `EVALUATION` 테이블에 업데이트하고, 변경 이력을 기록한다. (보정 사유 입력 기능 추가 고려)
    6.  결과를 클라이언트에 반환하고, 클라이언트는 화면을 갱신하고 메시지를 표시한다.
-   **호출 API 정보:**
    -   조회 API:
        -   HTTP 메서드: GET
        -   API 엔드포인트: `/api/ams/evaluations/results`
        -   요청 파라미터: 필터링 조건 (`admissionRound`, `admissionType`, `evaluationStage`, `departmentCode`, etc.)
        -   응답 파라미터: 평가 결과 목록 (지원자 정보 포함)
    -   보정 API:
        -   HTTP 메서드: PUT 또는 PATCH
        -   API 엔드포인트: `/api/ams/evaluations/results/{evaluationId}`
        -   요청 파라미터 (Path Variable): `evaluationId`
        -   요청 파라미터 (Body): 수정된 점수, 의견 등
        ```json
        {
          "scores": { "학업역량": 35, ... }, // 수정된 점수 객체
          "comments": "서류 재검토 후 점수 조정됨.", // 보정 사유 또는 수정된 의견
          "correctionReason": "초기 평가 오류" // 별도 보정 사유 필드
        }
        ```
        -   응답 파라미터: 성공/실패 정보
-   **Mockup 데이터 예시:**
    -   입력 (조회): `/api/ams/evaluations/results?evaluationStage=DOC`
    -   출력 (조회): 서류 평가 결과 목록 테이블 표시.
    -   입력 (보정 PUT `/api/ams/evaluations/results/2050`): 상기 보정 요청 Body
    -   출력 (보정): 해당 지원자의 점수 업데이트 및 "보정되었습니다." 메시지 표시.

---

