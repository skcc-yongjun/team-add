# IES 평가 입력 화면 (IES-SCR-002)

## 사용 역할자: 평가위원

---

## 기능 1: 평가 대상 수험생 목록 조회 (가번호 기반)

-   **관련 요구사항:** IES-REQ-007 (평가자 데이터 연동 결과), IES-REQ-009 (가번호 매칭), IES-REQ-011 (평가 수행 기반)
-   **입력 정보:**
    -   평가위원 로그인 시 자동으로 할당된 평가 세션(모집 시기, 전형, 고사장, 조 등) 정보 사용.
    -   화면 로드 시 또는 '새로고침' 버튼 클릭.
-   **출력 정보:**
    -   평가위원이 평가해야 할 수험생 목록 테이블 (가번호, 평가 상태 - 미평가/임시저장/완료, 평가 시작/수정 버튼).
    -   평가 진행 현황 요약 (총 대상, 완료, 미평가 수).
-   **프로세스 설명:**
    1.  평가위원이 로그인 후 평가 화면에 접근한다.
    2.  클라이언트는 평가위원의 세션 정보를 바탕으로 담당할 수험생(가번호 기준) 목록 및 현재 평가 상태를 조회하는 API를 호출한다.
    3.  서버는 해당 평가위원에게 배정된 `EVALUATION` 레코드 목록(가번호 포함)을 조회하여 반환한다.
    4.  클라이언트는 목록과 요약 정보를 화면에 표시한다.
-   **호출 API 정보:**
    -   HTTP 메서드: GET
    -   API 엔드포인트: `/api/ies/evaluations/targets`
    -   API 목적: 평가 대상 수험생(가번호 기반) 목록 조회
    -   요청 파라미터: (로그인된 평가위원 정보는 서버 세션 또는 토큰에서 식별), 필요시 `admissionRound`, `examLocation` 등 추가 필터링.
    -   응답 파라미터:
        ```json
        {
          "summary": {"total": 10, "completed": 2, "pending": 8},
          "targets": [
            { "tempId": "A001", "evaluationId": 3001, "status": "완료" },
            { "tempId": "A002", "evaluationId": 3002, "status": "미평가" },
            // ... more targets
          ]
        }
        ```
-   **Mockup 데이터 예시:**
    -   입력: 화면 로드.
    -   출력: 가번호 목록(A001~A010)과 각 상태, 요약 정보 표시.

## 기능 2: 실시간 가번호별 개별/그룹 평가 입력

-   **관련 요구사항:** IES-REQ-011: 실시간 가번호별 개별·그룹 평가
-   **입력 정보:**
    -   목록에서 평가할 가번호의 '평가 시작' 또는 '수정' 버튼 클릭.
    -   평가 입력 폼 (모달 또는 별도 섹션):
        -   평가 항목별 점수 입력 필드 (숫자 입력, 슬라이더, 등급 선택 등 - IES-REQ-008 설정 기반).
        -   평가 의견 입력 텍스트 영역.
    -   '임시 저장' 또는 '평가 완료' 버튼 클릭.
-   **출력 정보:**
    -   평가 입력 폼 표시 (해당 가번호, 평가 항목 목록, 배점 안내).
    -   저장 성공/실패 메시지.
    -   평가 목록 테이블에서 해당 가번호의 상태 업데이트 (임시저장/완료).
-   **프로세스 설명:**
    1.  평가위원이 목록에서 특정 가번호를 선택하여 평가를 시작한다.
    2.  클라이언트는 해당 평가(`evaluationId`)의 상세 정보(설정된 평가 항목 등)를 조회하고, 평가 입력 폼을 표시한다. (기존 저장된 내용이 있으면 불러옴)
    3.  평가위원이 항목별 점수와 의견을 입력한다.
    4.  '임시 저장' 또는 '평가 완료' 버튼 클릭 시, 클라이언트는 입력된 평가 데이터(`scores`, `comments`)와 평가 상태(`status` - 임시저장/완료)를 API로 전송한다.
    5.  서버는 입력값을 검증(점수 범위 등)하고, `EVALUATION` 테이블에 해당 `evaluationId`의 점수, 의견, 상태를 업데이트한다.
    6.  처리 결과를 클라이언트에 반환하고, 클라이언트는 메시지를 표시하고 목록 상태를 갱신한다.
-   **호출 API 정보:**
    -   평가 항목 조회 API (폼 로드 시):
        -   HTTP 메서드: GET
        -   API 엔드포인트: `/api/ies/evaluations/{evaluationId}/form`
        -   응답 파라미터: 평가 항목 정의, 기 저장된 점수/의견
    -   평가 결과 저장/제출 API:
        -   HTTP 메서드: PUT 또는 PATCH
        -   API 엔드포인트: `/api/ies/evaluations/{evaluationId}`
        -   API 목적: 개별 평가 결과 저장 또는 최종 제출
        -   요청 파라미터 (Path Variable): `evaluationId`
        -   요청 파라미터 (Body):
            ```json
            {
              "scores": { "항목1": 8, "항목2": 7, "항목3": 9 }, // 항목명은 설정 기반
              "comments": "전공 이해도 우수함.",
              "status": "COMPLETED" // 또는 "IN_PROGRESS" (임시저장)
            }
            ```
        -   응답 파라미터: 성공/실패 정보
-   **Mockup 데이터 예시:**
    -   입력: 가번호 'A002' 평가 시작 -> 점수 및 의견 입력 -> '평가 완료' 클릭. 요청 Body 전송.
    -   출력: "평가 결과가 저장되었습니다." 메시지. 목록에서 'A002' 상태 '완료'로 변경. 요약 정보 업데이트.

## 기능 3: 실격/결시 등 특이사항 표기

-   **관련 요구사항:** IES-REQ-012: 실격·결시 등 특이사항 표기
-   **입력 정보:**
    -   평가 입력 폼 내 '특이사항' 버튼/체크박스 선택 (예: '결시', '실격').
    -   (실격 시) 사유 입력 필드 또는 드롭다운 선택.
    -   '평가 완료' (또는 별도 '상태 변경') 버튼 클릭.
-   **출력 정보:**
    -   해당 가번호의 평가 상태가 '결시' 또는 '실격'으로 변경됨.
    -   저장 성공/실패 메시지.
-   **프로세스 설명:**
    1.  평가 중 수험생이 결시했거나 실격 사유가 발생한 경우, 평가위원이 해당 상태를 선택/입력한다.
    2.  평가 결과를 저장/제출할 때, 이 특이사항 정보도 함께 API로 전송된다. (기능 2의 저장 API 활용, `status` 필드 값 변경)
    3.  서버는 `EVALUATION` 테이블의 상태를 'ABSENT' 또는 'DISQUALIFIED'로 업데이트하고, 필요시 사유를 기록한다.
    4.  처리 결과를 클라이언트에 반환한다.
-   **호출 API 정보:** 기능 2의 저장/제출 API 사용. `status` 필드에 'ABSENT' 또는 'DISQUALIFIED' 값 전달.
-   **Mockup 데이터 예시:**
    -   입력: 가번호 'A003' 평가 중 '결시' 체크 후 '평가 완료' 클릭. 요청 Body에 `status: "ABSENT"` 포함.
    -   출력: "결시 처리되었습니다." 메시지. 목록에서 'A003' 상태 '결시'로 변경.

---

