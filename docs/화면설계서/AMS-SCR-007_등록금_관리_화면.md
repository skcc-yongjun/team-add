# 등록금 관리 화면 (AMS-SCR-007)

## 사용 역할자: 입학처 담당자, 재무 담당자, 시스템 관리자

---

## 기능 1: 등록금 납부 현황 조회

-   **관련 요구사항:** AMS-REQ-020 (데이터 확인), AMS-REQ-026 (실시간 수납 현황 연동 결과 조회)
-   **입력 정보:**
    -   조회 조건 선택 (모집 시기, 전형, 모집 단위, 납부 상태 - 완료/미납/환불).
    -   검색 키워드 입력 (수험번호, 이름).
    -   '조회' 버튼 클릭.
-   **출력 정보:**
    -   조건에 맞는 등록 대상자 목록 테이블 (수험번호, 이름, 모집 단위, 고지 금액, 납부 금액, 납부 일시, 납부 상태, 가상계좌 번호 등).
    -   납부 현황 통계 (총 대상자 수, 납부 완료자 수, 미납자 수, 납부율 %).
-   **프로세스 설명:**
    1.  사용자가 조회 조건을 설정하고 '조회' 버튼을 클릭한다.
    2.  클라이언트는 조건을 API로 전송하여 등록금 납부 현황 데이터를 조회한다. 이 API는 AMS 내부 데이터(`APPLICATION`, `ADMISSION_DECISION`)와 FRS로부터 연동된 납부 데이터(`PAYMENT`, `REFUND`)를 함께 조회해야 한다.
    3.  서버는 조건에 맞는 데이터를 조합하여 반환한다.
    4.  클라이언트는 수신된 데이터를 테이블과 통계 정보 영역에 표시한다.
-   **호출 API 정보:**
    -   HTTP 메서드: GET
    -   API 엔드포인트: `/api/ams/registration/payments/status` (또는 `/api/frs/payments` 조회 API 활용 - 시스템 아키텍처에 따라 결정)
    -   API 목적: 등록금 납부 현황 조회
    -   요청 파라미터: 조회 조건 (`admissionRound`, `paymentStatus` 등)
    -   응답 파라미터: 납부 현황 목록 및 통계
        ```json
        {
          "summary": { "totalCount": 150, "paidCount": 138, "unpaidCount": 12, "paymentRate": 92.0 },
          "payments": [
            {
              "applicationId": 1001, "applicantId": "2024S0001", "name": "홍길동",
              "departmentName": "컴퓨터공학과", "amountDue": 4500000, "amountPaid": 4500000,
              "paidAt": "2024-08-16T10:00:00", "paymentStatus": "완료",
              "virtualAccount": "123-456-789012"
            }, ...
          ]
        }
        ```
-   **Mockup 데이터 예시:**
    -   입력 (조회): `/api/ams/registration/payments/status?paymentStatus=UNPAID`
    -   출력 (조회): 미납자 목록 테이블 및 요약 통계 표시.

## 기능 2: 등록금 데이터 확인/관리/수정 (제한적)

-   **관련 요구사항:** AMS-REQ-020: 등록금 데이터 확인·관리·수정
-   **입력 정보:**
    -   목록에서 수정이 필요한 대상자 선택.
    -   수정 가능한 필드 값 변경 (예: 고지 금액 오류 수정 - 매우 신중해야 함, 비고란 입력 등).
    -   '저장' 버튼 클릭.
-   **출력 정보:** 수정된 내용 반영 및 성공/실패 메시지.
-   **프로세스 설명:**
    1.  담당자가 납부 현황 목록에서 특정 대상자의 정보 수정이 필요한 경우 (예: 장학금 반영 누락으로 인한 고지 금액 조정), 해당 데이터를 수정한다.
    2.  '저장' 버튼 클릭 시, 클라이언트는 수정된 정보와 대상자 ID를 API로 전송한다.
    3.  서버는 입력값을 검증하고, 관련 데이터(`PAYMENT` 테이블 등)를 업데이트한다. (FRS 시스템과의 데이터 정합성 유지 중요)
    4.  처리 결과를 클라이언트에 반환한다.
-   **호출 API 정보:**
    -   HTTP 메서드: PUT
    -   API 엔드포인트: `/api/ams/registration/payments/{paymentId}` (또는 application ID 기반)
    -   API 목적: 등록금 관련 정보 수정 (제한적)
    -   요청 파라미터 (Path Variable): `paymentId` 또는 `applicationId`
    -   요청 파라미터 (Body): 수정할 필드와 값
        ```json
        { "amountDue": 4000000, "remarks": "장학금 50만원 반영" }
        ```
    -   응답 파라미터: 성공/실패 정보
-   **Mockup 데이터 예시:**
    -   입력: 특정 학생 고지 금액 수정 후 저장.
    -   출력: "수정되었습니다." 메시지, 해당 학생의 고지 금액 업데이트.

## 기능 3: 등록금 고지서 출력

-   **관련 요구사항:** AMS-REQ-021: 등록금 고지서 출력
-   **입력 정보:**
    -   목록에서 고지서를 출력할 대상자 선택 (단일/다중).
    -   '고지서 출력' 버튼 클릭.
-   **출력 정보:** 선택된 대상자의 등록금 고지서가 PDF 등으로 생성되어 다운로드/표시됨. (고지서에는 납부 금액, 가상계좌 번호, 납부 기한 등이 포함됨)
-   **프로세스 설명:**
    1.  사용자가 고지서를 출력할 대상자를 선택하고 버튼을 클릭한다.
    2.  클라이언트는 선택된 대상자의 ID 목록을 API로 전송한다.
    3.  서버는 해당 대상자의 등록금 정보(`PAYMENT` 등)를 조회하여, 미리 정의된 고지서 템플릿에 따라 파일을 생성한다.
    4.  생성된 파일을 클라이언트로 전송하여 다운로드한다.
-   **호출 API 정보:**
    -   HTTP 메서드: POST (다수 ID) 또는 GET (단일 ID)
    -   API 엔드포인트: `/api/ams/registration/invoice/print` 또는 `/api/ams/registration/invoice/{paymentId}/print`
    -   API 목적: 등록금 고지서 파일 생성 및 반환
    -   요청 파라미터: 대상자 ID 목록 또는 단일 ID
    -   응답 파라미터: 파일 스트림
-   **Mockup 데이터:** 없음 (파일 다운로드)

## 기능 4: 등록/환불/충원 명부 관리 (조회 및 출력)

-   **관련 요구사항:** AMS-REQ-023: 녹취·합격·등록·환불·충원 명부 관리
-   **입력 정보:**
    -   조회/출력할 명부 종류 선택 (등록자, 환불자, 충원 대상자, 충원 합격자 등).
    -   조회 조건 설정 (모집 시기, 전형 등).
    -   '조회' 또는 '명부 출력' 버튼 클릭.
-   **출력 정보:**
    -   선택한 종류의 명부 데이터가 화면 테이블에 표시됨.
    -   '명부 출력' 시, 해당 명부가 파일(Excel, PDF 등)로 생성되어 다운로드됨.
-   **프로세스 설명:**
    1.  사용자가 필요한 명부 종류와 조건을 선택한다.
    2.  '조회' 시: API를 호출하여 조건에 맞는 데이터를 조회하고 화면에 표시한다.
    3.  '명부 출력' 시: API를 호출하여 조건에 맞는 데이터를 조회하고, 서버에서 해당 명부 파일을 생성하여 다운로드한다. 데이터는 `APPLICATION`, `ADMISSION_DECISION`, `PAYMENT`, `REFUND`, `RECRUITMENT_LOG` 등 여러 테이블에서 조합될 수 있다.
-   **호출 API 정보:**
    -   조회 API:
        -   HTTP 메서드: GET
        -   API 엔드포인트: `/api/ams/lists/{listType}` (예: `/api/ams/lists/registrants`)
        -   요청 파라미터: 조회 조건
        -   응답 파라미터: 해당 명부 데이터 목록
    -   출력 API:
        -   HTTP 메서드: GET 또는 POST
        -   API 엔드포인트: `/api/ams/lists/{listType}/download`
        -   요청 파라미터: 조회 조건
        -   응답 파라미터: 파일 스트림
-   **Mockup 데이터 예시:**
    -   입력 (조회): `/api/ams/lists/registrants?admissionRound=2024S`
    -   출력 (조회): 2024 수시 등록자 명단 테이블 표시.
    -   입력 (출력): '등록자 명부 출력' 버튼 클릭.
    -   출력 (출력): `2024_수시_등록자명부.xlsx` 파일 다운로드.

## 기능 5: 장학 관리 연계 (대상자 표시)

-   **관련 요구사항:** AMS-REQ-025: 장학관리
-   **입력 정보:** 없음 (조회 시 자동으로 관련 정보 표시).
-   **출력 정보:** 등록금 납부 현황 목록 테이블에 '장학 대상 여부', '장학금 종류', '감면액' 등 장학 관련 컬럼 추가 표시.
-   **프로세스 설명:** 등록금 납부 현황 조회 시, 서버는 각 대상자의 장학 정보(별도 장학 시스템 연동 또는 내부 데이터)를 함께 조회하여 결과에 포함시킨다. 클라이언트는 이 정보를 테이블에 표시한다. (장학금 상세 관리는 별도 시스템에서 이루어질 수 있음)
-   **호출 API 정보:** 기능 1의 조회 API 응답에 장학 정보가 포함되도록 확장.
-   **Mockup 데이터 예시:** 기능 1의 응답 `payments` 객체 내부에 `scholarshipInfo: {"type": "성적우수", "amount": 1000000}` 와 같은 필드 추가.

---

