# 프로그램 설계서: 통합 입학 관리 시스템

## 1. 시스템 개요

### 1.1. 시스템 목적
본 시스템은 대학 입학 전형의 전 과정을 효율적이고 체계적으로 관리하기 위한 통합 솔루션이다. 원서 접수부터 서류 및 면접/실기 평가, 사정, 합격자 발표, 등록금 수납 및 환불, 최종 학사 시스템 이관까지의 복잡한 입학 업무를 디지털화하여 업무 효율성을 극대화하고, 수험생 및 교직원에게 편리하고 정확한 정보 접근성을 제공하는 것을 목적으로 한다.

### 1.2. 주요 기능
본 시스템은 크게 5개의 핵심 서브 시스템과 공통 모듈로 구성된다:
*   **입학관리시스템 (AMS):** 원서 접수, 데이터 검증, 평가 관리, 사정 관리, 합격자 관리 등 입학 전형의 핵심 프로세스 관리.
*   **면접·실기 평가시스템 (IES):** 면접 및 실기고사 출석 관리, 평가 진행, 결과 집계 등 현장 평가 업무 지원.
*   **녹취·충원관리 시스템 (RFS):** 충원 합격 대상자 대상 전화 녹취, SMS 발송, 충원 현황 관리 등 충원 업무 지원.
*   **입학상담 솔루션 (ACS):** 모집 요강 정보 제공, 성적 기반 맞춤 상담, 상담 통계 관리 등 대외 상담 업무 지원.
*   **등록금 수납·환불 시스템 (FRS):** 가상계좌 기반 실시간 등록금 수납 및 환불 처리, 금융기관 연계 등 재무 관련 업무 지원.
*   **공통 (CMN):** 시스템 전반에서 사용되는 공통 기능 (예: 수험생 데이터 조회, 공통 코드 관리 등) 제공.

### 1.3. 도입 배경
기존의 분산되고 수작업에 의존하던 입학 관리 방식은 데이터 정합성 문제, 업무 처리 지연, 정보 접근의 어려움 등 다양한 비효율을 야기했다. 또한, 변화하는 입시 환경과 다양한 전형 유형에 유연하게 대응하기 어려운 구조였다. 본 통합 시스템 도입을 통해 △데이터 일관성 확보 △업무 프로세스 자동화 및 표준화 △실시간 정보 공유 및 투명성 증대 △수험생 서비스 만족도 향상 △입학 관련 데이터의 통합 분석 및 활용 기반 마련을 목표로 한다.

## 2. 시스템 아키텍처

### 2.1. 전체 시스템 구성도

```mermaid
graph TD
    subgraph "사용자 인터페이스 (Frontend - React/TypeScript)"
        UI_AMS[AMS 화면]
        UI_IES[IES 화면]
        UI_RFS[RFS 화면]
        UI_ACS[ACS 화면 (수험생/교직원)]
        UI_FRS[FRS 화면]
    end

    subgraph "애플리케이션 서버 (Backend - Spring Boot)"
        API_GW[API Gateway]
        SVC_AMS[AMS 서비스]
        SVC_IES[IES 서비스]
        SVC_RFS[RFS 서비스]
        SVC_ACS[ACS 서비스]
        SVC_FRS[FRS 서비스]
        SVC_CMN[CMN 공통 서비스]
    end

    subgraph "데이터베이스 (PostgreSQL)"
        DB[(Admissions DB)]
    end

    subgraph "외부 연동"
        EXT_SIS[학사 시스템]
        EXT_EDU[교육행정정보시스템 (학생부)]
        EXT_KICE[한국교육과정평가원 (수능)]
        EXT_BANK[금융기관 (가상계좌/펌뱅킹)]
        EXT_SMS[SMS 발송 서비스]
        EXT_CTI[CTI 솔루션 (전화/녹취)]
    end

    User[사용자 (수험생, 교직원, 평가위원, 관리자)] --> UI_AMS & UI_IES & UI_RFS & UI_ACS & UI_FRS

    UI_AMS & UI_IES & UI_RFS & UI_ACS & UI_FRS --> API_GW

    API_GW --> SVC_AMS & SVC_IES & SVC_RFS & SVC_ACS & SVC_FRS & SVC_CMN

    SVC_AMS <--> DB
    SVC_IES <--> DB
    SVC_RFS <--> DB
    SVC_ACS <--> DB
    SVC_FRS <--> DB
    SVC_CMN <--> DB

    SVC_AMS --> EXT_EDU & EXT_KICE & EXT_SIS
    SVC_IES --> SVC_AMS  // 평가 결과 전송
    SVC_RFS --> SVC_AMS & EXT_CTI & EXT_SMS // 충원 결과, CTI 연동, SMS
    SVC_ACS --> SVC_AMS // 상담 대상자 정보 조회
    SVC_FRS --> SVC_AMS & EXT_BANK & EXT_SMS // 등록 상태, 은행 연동, SMS

    %% Cross-service calls (via API Gateway or direct internal calls)
    SVC_AMS --> SVC_CMN
    SVC_IES --> SVC_CMN
    SVC_RFS --> SVC_CMN
    SVC_ACS --> SVC_CMN
    SVC_FRS --> SVC_CMN
```

### 2.2. 계층 구조
*   **Presentation Layer (Frontend):** React.js와 TypeScript 기반의 Single Page Application(SPA)으로 구현. 사용자 역할별 맞춤 UI/UX 제공. RESTful API를 통해 백엔드와 통신.
*   **Application Layer (Backend):** Spring Boot 기반의 마이크로서비스 또는 모듈형 모놀리식 구조. 각 서브 시스템(AMS, IES 등)은 논리적 또는 물리적으로 분리된 서비스로 구성. RESTful API 제공. 비즈니스 로직 처리, 데이터 유효성 검증, 트랜잭션 관리 수행.
*   **Data Access Layer (Backend):** Spring Data JPA와 QueryDSL(필요시)를 사용하여 PostgreSQL 데이터베이스와 상호작용. 데이터 영속성 처리.
*   **Persistence Layer (Database):** PostgreSQL 사용. 입학 관련 모든 데이터 저장 및 관리.

### 2.3. 사용자 역할 분류
*   **수험생:** 원서 접수, 지원서 출력, 합격 여부 확인, 등록금 납부/환불 신청, 상담 신청 등.
*   **입학처 담당자:** 시스템 전반 관리, 데이터 업로드/다운로드, 평가/사정 관리, 합격/등록 관리, 통계 생성 등 핵심 업무 수행.
*   **평가위원:** 면접/실기 평가 입력, 평가 내용 확인/보정 등 평가 관련 업무 수행.
*   **상담사 (교직원/입학사정관):** 입학 상담 솔루션 활용, 상담 기록 관리.
*   **재무 담당자:** 등록금 수납/환불 승인, 금융기관 연계 관리.
*   **시스템 관리자:** 시스템 환경 설정, 사용자 계정 관리, 백업/복구 등 시스템 운영 관리.

## 3. 모듈별 상세 설계

### 3.1. 입학관리시스템 (AMS)
*   **역할:** 입학 전형의 핵심 데이터를 생성, 관리, 처리하는 중앙 시스템. 타 시스템과의 데이터 연동 허브 역할.
*   **처리 요구사항:** AMS-REQ-001 ~ AMS-REQ-028 (학사이관까지 전 과정 포괄)
*   **주요 기능/서브모듈:**
    *   **원서접수 관리:** 온라인 원서 접수 기능, 접수 데이터 검증/수정/보정(AMS-REQ-001), 지원서 출력(AMS-REQ-002), 학생부/수능 데이터 연동 및 관리(AMS-REQ-003, AMS-REQ-004), 지원자 통합 조회(AMS-REQ-005).
    *   **평가 관리:** 수능/학생부 점수 반영 및 평가 기준 관리(AMS-REQ-006), 서류 평가 요소 관리(AMS-REQ-007), 평가 내용 확인/보정(AMS-REQ-008), 면접/실기 평가 결과 연동 및 관리(IES 연동, AMS-REQ-009), 제출서류/출력물 관리(AMS-REQ-010).
    *   **사정 관리:** 전형별 평가요소 배점 설정(AMS-REQ-011), 사정 단계별 점검(AMS-REQ-012), 평가 점수 합산 및 최종 배점 적용(AMS-REQ-013), 사정 결과 데이터 및 출력물 생성/관리(AMS-REQ-014).
    *   **합격 관리:** 합격자 데이터 확정/관리/보정(AMS-REQ-015), 등록 업무용 데이터 생성(AMS-REQ-016), 합격자 발표(개별 확인 기능, AMS-REQ-017), 합격 관련 출력물(합격증 등) 관리(AMS-REQ-018), 미달 시 충원 계획 연계 처리(AMS-REQ-019).
    *   **등록 관리:** 등록금 책정 데이터 연동 및 관리(AMS-REQ-020), 등록금 고지서 생성/출력(AMS-REQ-021), 금융 기관 연동 지원(FRS 연계, AMS-REQ-022), 등록/환불/충원 명부 관리(AMS-REQ-023), 추가모집 지원(AMS-REQ-024), 장학 대상자 연계 관리(AMS-REQ-025), 실시간 수납 현황 연동(FRS 연계, AMS-REQ-026).
    *   **학사 이관:** 최종 등록자 대상 학번 부여 로직 수행 및 학사 시스템 연계 데이터 생성/전송(AMS-REQ-027), 보고용 통계 및 출력물 생성(AMS-REQ-028).
*   **타 시스템 연계:**
    *   IES: 평가 대상자 정보 전송, 평가 결과 수신.
    *   RFS: 충원 대상자 정보 전송, 충원 결과(등록의사 등) 수신.
    *   FRS: 합격자/등록금 정보 전송, 수납/환불 결과 수신.
    *   ACS: 상담 대상자 기본 정보 제공.
    *   CMN: 공통 코드 및 수험생 개별 데이터 조회 기능 사용.
    *   외부: 학생부/수능 데이터 수신, 학사 시스템으로 최종 데이터 전송.
*   **API 예시:**
    *   `POST /api/ams/applications`: 원서 접수 처리
    *   `PUT /api/ams/applications/{appId}/validation`: 접수 데이터 검증/보정
    *   `GET /api/ams/applicants`: 지원자 리스트 조회 (필터링/검색 포함)
    *   `POST /api/ams/evaluations/scores`: 평가 점수 입력/수정 (IES 결과 포함)
    *   `POST /api/ams/admissions/decisions`: 사정 결과 확정
    *   `GET /api/ams/applicants/{applicantId}/status`: 지원자 상태 조회 (합격/등록 등)
    *   `POST /api/ams/transfer/student-info`: 학사 이관 데이터 생성/전송
*   **데이터 흐름 예시 (원서접수):** 수험생 입력 -> FE 유효성 검사 -> BE API 호출 -> BE 유효성 검사 및 데이터 보정 로직 -> DB 저장 -> 접수 완료 처리 -> 수험생에게 접수번호 발급.
*   **예외 처리:** 중복 지원 방지, 데이터 형식 오류 처리, 필수 입력 누락 검증, 외부 시스템 연동 오류 처리(재시도 로직 포함), 대용량 데이터(학생부/수능) 처리 시 성능 고려 및 오류 로깅.

### 3.2. 면접·실기 평가시스템 (IES)
*   **역할:** 면접/실기 평가 현장에서의 출석 체크, 평가 진행, 결과 입력을 지원하는 시스템. 평가 공정성 및 효율성 제고.
*   **처리 요구사항:** IES-REQ-001 ~ IES-REQ-015
*   **주요 기능/서브모듈:**
    *   **출석 관리:** 통합 출석 점검(IES-REQ-001), 바코드/QR 기반 수험생 확인(IES-REQ-002), 출석 시 가번호 자동 부여 및 조 배정(IES-REQ-003), 출석 진행요원 관리(IES-REQ-004).
    *   **평가 준비:** 평가위원 정보 관리(IES-REQ-005), 모집시기/전형별 환경 설정(평가 항목, 배점 등)(IES-REQ-006), 수험생/평가자 데이터 임포트 및 명단 관리(AMS 연동)(IES-REQ-007), 평가항목/등급 상세 설정(IES-REQ-008).
    *   **평가 진행:** 가번호/수험번호 매칭 정보 관리(IES-REQ-009), 면접 출석 정보 연동(IES-REQ-010), 평가위원별 실시간 평가 입력 (개별/그룹, 가번호 기반)(IES-REQ-011), 실격/결시 등 특이사항 입력(IES-REQ-012).
    *   **결과 및 통계:** 각종 출력물(확인대장, 명단, 조배정표) 생성(IES-REQ-013), 평가 결과 집계 및 출력(IES-REQ-014), 평가 관련 통계 및 보고서 생성(IES-REQ-015).
*   **타 시스템 연계:**
    *   AMS: 평가 대상 수험생 정보 수신, 최종 평가 결과(점수, 특이사항) 전송.
    *   CMN: 수험생 기본 정보 조회 기능 사용.
*   **API 예시:**
    *   `POST /api/ies/attendance/check`: 수험생 출석 체크 (바코드/QR 정보 포함)
    *   `GET /api/ies/assignments`: 평가 조/가번호 배정 결과 조회
    *   `POST /api/ies/evaluations/scores/{tempId}`: 가번호 기반 평가 점수 입력
    *   `PUT /api/ies/evaluations/status/{tempId}`: 실격/결시 등 상태 변경
    *   `GET /api/ies/reports/evaluation-summary`: 평가 결과 요약 보고서 생성
*   **데이터 흐름 예시 (평가 진행):** 평가위원 로그인 -> 담당 수험생(가번호) 목록 확인 -> 수험생 평가 진행 -> 실시간 점수 입력 및 특이사항 기록 -> 저장 -> 모든 평가 완료 후 결과 집계 -> AMS로 결과 전송.
*   **예외 처리:** 네트워크 불안정 시 오프라인 평가 지원 후 동기화 방안 고려, 동시 평가 입력 시 데이터 충돌 방지(낙관적/비관적 락), 평가 시간 초과 관리, 가번호-수험번호 매핑 오류 검증.

### 3.3. 녹취·충원관리 시스템 (RFS)
*   **역할:** 충원 합격 대상자에게 전화 통화(녹취 포함) 및 SMS를 통해 등록 의사를 확인하고, 충원 진행 현황을 실시간으로 관리하는 시스템.
*   **처리 요구사항:** RFS-REQ-001 ~ RFS-REQ-014
*   **주요 기능/서브모듈:**
    *   **데이터 연동:** AMS로부터 충원 대상자 및 결과 데이터 연동(수신/송신) (RFS-REQ-001).
    *   **상담사 기능:** 원클릭 전화 발신(CTI 연동), 통화 내용 자동 녹취 및 저장/전송(RFS-REQ-002), 표준 문구 기반 SMS 발송(RFS-REQ-003), 녹취 파일/통화 내역/상담 메모 관리(RFS-REQ-004), 동일 지원자 타 모집단위 지원 정보 조회(RFS-REQ-005).
    *   **관리자 기능:** 전형/차수별 충원 서비스 생성 및 설정(RFS-REQ-006), 충원 데이터(결과 등) 수동 업로드 및 수정(RFS-REQ-007), 조건별(지원자, 모집단위 등) 검색 및 필터링(RFS-REQ-008), 충원 현황 통계 생성 및 다운로드(RFS-REQ-009).
    *   **충원 관리:** 충원 대상자 명부(배수 설정) 출력(RFS-REQ-010), 교차 지원자 충원 시 타 모집단위 자동 인원 조정 로직(RFS-REQ-011), 당일 충원 결과 통합 현황표 생성(RFS-REQ-012), 학과별 담당자 로그인 시 해당 학과 정보만 조회 제한(RFS-REQ-013), 등록/환불 기간 설정 및 관리(RFS-REQ-014).
*   **타 시스템 연계:**
    *   AMS: 충원 대상자 정보 수신, 최종 충원 결과(등록 의사, 포기 등) 전송.
    *   CMN: 수험생 기본 정보 조회 기능 사용.
    *   외부 CTI: 전화 발신, 녹취 기능 연동.
    *   외부 SMS: SMS 발송 연동.
*   **API 예시:**
    *   `GET /api/rfs/recruitment/targets`: 충원 대상자 목록 조회 (차수, 배수 등 필터링)
    *   `POST /api/rfs/calls/start`: 전화 발신 및 녹취 시작 (CTI 연동)
    *   `POST /api/rfs/calls/log`: 통화 결과 및 메모 저장 (결과: 등록/포기/보류 등)
    *   `POST /api/rfs/sms/send`: SMS 발송 요청
    *   `GET /api/rfs/statistics/summary`: 충원 현황 통계 조회
*   **데이터 흐름 예시 (충원 전화):** 상담사 로그인 -> 충원 대상자 확인 -> '전화걸기' 클릭 -> CTI 통해 전화 연결 및 녹취 시작 -> 통화 진행 -> 통화 종료 후 결과(등록/포기 등) 및 메모 입력 -> 저장 -> RFS DB 기록 및 AMS로 결과 전송.
*   **예외 처리:** CTI 연동 실패 처리, 녹취 파일 저장 실패 처리, SMS 발송 실패 처리 및 재시도, 동시 다수 상담사의 동일 지원자 접촉 방지 (상태 플래그 활용), 충원 마감 시간 관리.

### 3.4. 입학상담 솔루션 (ACS)
*   **역할:** 수험생 및 학부모에게 온라인/오프라인 입학 상담 지원. 모집 정보 제공, 성적 기반 합격 가능성 예측 등 편의 기능 제공.
*   **처리 요구사항:** ACS-REQ-001 ~ ACS-REQ-009
*   **주요 기능/서브모듈:**
    *   **정보 제공:** 모집요강 정보 구조화 및 검색 기능(ACS-REQ-001), 온라인 상담 신청 및 성적 입력 화면 제공(ACS-REQ-002), 모집단위/학과 상세 정보 제공(ACS-REQ-003), 성적 시각화(그래프 등) 제공(ACS-REQ-005).
    *   **상담 기능:** 입력된 성적 기반 맞춤 상담 지원(학과/전형 추천 등)(ACS-REQ-004), 상담 내용 기록 및 관리.
    *   **관리 기능:** 상담 통계 제공(ACS-REQ-006), 상담 관련 자료(모집요강 파일 등) 업로드/관리(ACS-REQ-007), 공지사항 등 게시판 관리(ACS-REQ-008), 상담 DB 조회 및 관리(ACS-REQ-009).
*   **타 시스템 연계:**
    *   AMS: 모집단위, 전형 정보, (필요시) 과거 합격자 통계 데이터 등 수신.
    *   CMN: (필요시) 지원 이력 있는 수험생 정보 조회.
*   **API 예시:**
    *   `GET /api/acs/guidelines`: 모집요강 정보 조회
    *   `GET /api/acs/departments`: 학과 정보 조회
    *   `POST /api/acs/counseling/request`: 상담 신청 및 성적 입력
    *   `GET /api/acs/counseling/simulation`: 성적 기반 지원 가능성 시뮬레이션 결과 조회
    *   `POST /api/acs/counseling/log`: 상담 내용 기록
    *   `GET /api/acs/statistics/usage`: 상담 솔루션 이용 통계 조회
*   **데이터 흐름 예시 (온라인 상담):** 수험생 접속 -> 모집요강/학과 정보 탐색 -> 상담 신청 메뉴 -> 개인정보 및 성적 입력 -> 저장 -> 관리자/상담사 확인 -> (필요시) 답변 등록.
*   **예외 처리:** 성적 입력 형식 오류 검증, 개인정보보호 규정 준수(마스킹, 암호화), 부정확한 예측 정보 제공 가능성에 대한 안내 문구 표시.

### 3.5. 등록금 수납·환불 시스템 (FRS)
*   **역할:** 합격자의 등록금 수납 및 환불 처리를 자동화하고 관리하는 시스템. 금융기관과의 연동을 통해 실시간 처리 지원.
*   **처리 요구사항:** FRS-REQ-001 ~ FRS-REQ-004
*   **주요 기능/서브모듈:**
    *   **수납 관리:** 가상계좌 발급 신청 및 관리(FRS-REQ-002), 금융기관 펌뱅킹 연동을 통한 실시간 입금 확인(FRS-REQ-001), 입금 확인 시 SMS 통보 및 AMS DB 연동(FRS-REQ-001).
    *   **환불 관리:** 온라인/오프라인 환불 신청 접수(FRS-REQ-003), 환불 신청 정보 SMS 통보 및 DB 연동(FRS-REQ-003), 관리자 환불 승인 처리, 승인 후 RFS 충원 프로세스 연계 신호 전송(FRS-REQ-004).
*   **타 시스템 연계:**
    *   AMS: 등록 대상자 정보, 등록금액 정보 수신. 수납/환불 처리 결과 전송.
    *   RFS: 환불 발생 시 충원 필요 신호 전송.
    *   외부 금융기관: 가상계좌 발급/관리, 실시간 입금 내역 수신(펌뱅킹), 환불 이체 처리.
    *   외부 SMS: 입금 확인, 환불 신청/처리 결과 SMS 발송.
*   **API 예시:**
    *   `POST /api/frs/virtual-accounts`: 가상계좌 발급 요청
    *   `POST /api/frs/payments/callback`: (금융기관 호출) 실시간 입금 통지 수신
    *   `GET /api/frs/payments/status/{applicantId}`: 납부 상태 조회
    *   `POST /api/frs/refunds/request`: 환불 신청 접수
    *   `POST /api/frs/refunds/approve`: 환불 승인 처리
*   **데이터 흐름 예시 (등록금 수납):** AMS에서 합격자/등록금 정보 FRS로 전송 -> 수험생이 고지서에서 가상계좌 확인 -> 수험생이 해당 계좌로 입금 -> 금융기관이 FRS 시스템에 입금 통지(Callback) -> FRS가 입금 내역 검증 및 DB 저장 -> FRS가 AMS에 납부 완료 상태 업데이트 -> FRS가 수험생에게 SMS 발송.
*   **예외 처리:** 금융기관 연동 오류 처리(타임아웃, 네트워크 장애), 동명이인/금액 오류 입금 처리 방안, 환불 처리 지연 관리, 이중 환불 방지 로직.

### 3.6. 공통 (CMN)
*   **역할:** 여러 시스템에서 공통적으로 사용되는 기능 및 데이터 관리. 코드 재사용성 증대 및 일관성 유지.
*   **처리 요구사항:** CMN-REQ-001, CMN-REQ-002
*   **주요 기능/서브모듈:**
    *   **통합 조회:** 수험생 기본 정보, 지원 이력 등 개별 데이터 통합 조회 기능 제공(CMN-REQ-001). 각 시스템은 필요시 이 기능을 호출.
    *   **데이터 요청 관리:** 신규 데이터 항목이나 특정 양식의 데이터 추출 요청 처리 및 구현 지원(CMN-REQ-002). (주로 운영 단계에서의 요구사항 처리)
    *   **공통 코드 관리:** 전형 유형, 학과 코드, 상태 코드 등 시스템 전반에서 사용되는 코드 정보 관리 및 제공 API.
    *   **인증/인가 관리:** 사용자 로그인 처리, 역할 기반 접근 제어 공통 모듈 (Spring Security 등 활용).
*   **타 시스템 연계:** AMS, IES, RFS, ACS, FRS 등 모든 시스템에서 필요에 따라 호출하여 사용.
*   **API 예시:**
    *   `GET /api/cmn/applicants/{identifier}`: 수험번호/성명 등 식별자로 수험생 정보 조회
    *   `GET /api/cmn/codes/{groupCode}`: 공통 코드 목록 조회 (예: 전형 구분 코드)
    *   `POST /api/cmn/auth/login`: 사용자 로그인
*   **예외 처리:** 잘못된 식별자 조회 시 처리, 권한 없는 사용자의 데이터 접근 차단.

## 4. DB 설계 (개념 수준)

### 4.1. 주요 엔터티 및 관계 (ERD 개념)

```mermaid
erDiagram
    APPLICANT ||--o{ APPLICATION : "지원"
    APPLICATION ||--o{ APP_DOCUMENT : "제출"
    APPLICATION ||--o{ EVALUATION : "평가받음"
    APPLICATION ||--o{ ADMISSION_DECISION : "사정결정"
    APPLICATION ||--o{ PAYMENT : "등록금납부"
    APPLICATION {
        bigint application_id PK
        bigint applicant_id FK "APPLICANT"
        varchar admission_round "모집 시기"
        varchar admission_type "전형 유형"
        varchar department_code "모집 단위 코드"
        timestamp applied_at "지원 일시"
        varchar status "지원 상태 (접수, 평가중, 합격 등)"
        jsonb application_data "지원서 상세 내용"
    }
    APPLICANT {
        bigint applicant_id PK
        varchar name
        varchar birth_date
        varchar gender
        varchar phone_number UNIQUE
        varchar email UNIQUE
        text address
        timestamp created_at
        varchar unique_id "고유 식별자 (생년월일+성명 등)"
    }
    APP_DOCUMENT {
        bigint document_id PK
        bigint application_id FK "APPLICATION"
        varchar document_type "서류 종류 (학생부, 자소서 등)"
        varchar file_path "파일 경로 또는 데이터"
        timestamp uploaded_at
        boolean is_verified "검증 여부"
    }
    EVALUATION {
        bigint evaluation_id PK
        bigint application_id FK "APPLICATION"
        varchar evaluation_stage "평가 단계 (서류, 면접, 실기)"
        varchar evaluator_id FK "EVALUATOR"
        jsonb scores "평가 항목별 점수"
        text comments "평가 의견"
        timestamp evaluated_at
        varchar temp_id "가번호 (IES)"
        varchar status "특이사항 (결시, 실격 등)"
    }
    EVALUATOR {
        varchar evaluator_id PK
        varchar name
        varchar department
        varchar role "평가위원 역할"
    }
    ADMISSION_DECISION {
        bigint decision_id PK
        bigint application_id FK "APPLICATION"
        varchar decision_result "사정 결과 (최초합, 예비, 불합)"
        int preliminary_rank "예비 순위"
        numeric total_score "최종 환산 점수"
        timestamp decided_at
        varchar recruiter_status "충원 상태 (미대상, 대상, 등록, 포기)"
    }
    PAYMENT {
        bigint payment_id PK
        bigint application_id FK "APPLICATION"
        varchar virtual_account "가상 계좌번호"
        numeric amount_due "고지 금액"
        numeric amount_paid "납부 금액"
        timestamp paid_at "납부 일시"
        varchar payment_status "납부 상태 (미납, 완료)"
        varchar transaction_id "거래 ID (은행)"
    }
    REFUND {
        bigint refund_id PK
        bigint payment_id FK "PAYMENT"
        timestamp requested_at "환불 신청 일시"
        numeric refund_amount "환불 금액"
        varchar refund_status "환불 상태 (신청, 승인, 완료)"
        varchar bank_account "환불 계좌"
        timestamp completed_at "환불 완료 일시"
    }
    RECRUITMENT_LOG {
        bigint log_id PK
        bigint application_id FK "APPLICATION"
        int recruitment_round "충원 차수"
        timestamp call_started_at "통화 시작 시간"
        timestamp call_ended_at "통화 종료 시간"
        varchar result "통화 결과 (등록, 포기, 부재)"
        text memo "상담 메모"
        varchar recording_file_path "녹취 파일 경로"
        varchar counselor_id "상담사 ID"
    }
    SMS_LOG {
        bigint sms_log_id PK
        bigint application_id FK "APPLICATION"
        varchar recipient_number "수신 번호"
        text message_content "메시지 내용"
        timestamp sent_at "발송 시간"
        varchar status "발송 상태 (성공, 실패)"
    }
    COUNSELING_LOG {
        bigint counseling_log_id PK
        varchar applicant_name "상담 대상자명"
        varchar applicant_contact "상담 대상자 연락처"
        text applicant_scores "입력 성적"
        text counseling_content "상담 내용"
        varchar counselor_id "상담사 ID"
        timestamp counseled_at "상담 일시"
    }
    COMMON_CODE {
        varchar group_code "코드 그룹"
        varchar code "코드 값"
        varchar code_name "코드 명칭"
        int sort_order "정렬 순서"
        boolean is_active "사용 여부"
        PRIMARY KEY (group_code, code)
    }
    SYSTEM_USER {
        varchar user_id PK
        varchar password_hash
        varchar user_name
        varchar user_role FK "USER_ROLE"
        boolean is_active
    }
    USER_ROLE {
        varchar role_id PK
        varchar role_name
        jsonb permissions "권한 목록"
    }

    %% Relationships clarification textually where diagram is complex:
    %% - One Application can have multiple Evaluations (e.g., document, interview).
    %% - One Applicant can have multiple Applications (e.g., different rounds, types).
    %% - Payments are linked to Applications (usually 1:1 for final registration).
    %% - Refunds are linked to Payments (1:1).
    %% - Recruitment Logs track communication for충원 candidates linked to Admission Decisions/Applications.
    %% - SMS Logs can be linked to various entities (Applicant, Application) depending on context.
    %% - Counseling Logs might be linked to Applicants if they have applied, or standalone if pre-application.
    %% - System Users have Roles, defining their access permissions.
```

### 4.2. 주요 엔터티 설명
*   **APPLICANT:** 지원자(수험생)의 기본 인적 정보.
*   **APPLICATION:** 특정 모집 시기/전형/모집단위에 대한 지원 정보. 지원서 상세 내용은 JSONB 타입으로 유연하게 저장 고려.
*   **APP_DOCUMENT:** 지원자가 제출한 서류 정보 (학생부, 자소서 등).
*   **EVALUATION:** 각 평가 단계(서류, 면접, 실기 등)의 평가 결과. 평가 항목별 점수는 JSONB 형태 고려. IES 시스템과의 연계를 위해 가번호(temp\_id) 및 특이사항 포함.
*   **EVALUATOR:** 평가위원 정보.
*   **ADMISSION_DECISION:** 사정 결과 (합격/불합/예비) 및 최종 점수. 충원 대상 여부 및 상태 포함.
*   **PAYMENT:** 등록금 납부 정보. 가상계좌, 금액, 납부 상태 등 관리.
*   **REFUND:** 등록금 환불 정보.
*   **RECRUITMENT_LOG:** 충원 관련 전화 통화 기록 (RFS 시스템). 녹취 파일 경로 포함.
*   **SMS_LOG:** 발송된 SMS 내역 관리.
*   **COUNSELING_LOG:** 입학 상담 기록 (ACS 시스템).
*   **COMMON_CODE:** 시스템 전반에서 사용될 공통 코드 관리.
*   **SYSTEM_USER:** 시스템 사용자 계정 정보.
*   **USER_ROLE:** 사용자 역할 및 권한 정보.

### 4.3. 고려사항
*   **인덱싱:** 주요 조회 조건(수험번호, 지원자명, 모집단위, 상태 등)에 적절한 인덱스 생성 필요.
*   **데이터 보안:** 개인정보(주민번호, 연락처 등)는 암호화하여 저장.
*   **데이터 정합성:** 트랜잭션 관리를 통해 데이터 입력/수정/삭제 시 일관성 유지. Foreign Key 제약조건 적극 활용.
*   **확장성:** JSONB 타입을 활용하여 향후 변경될 수 있는 지원서 항목, 평가 항목 등에 유연하게 대응.
*   **대용량 데이터 처리:** 학생부/수능 데이터 등 대용량 파일/데이터 처리 시 별도 스토리지 사용 또는 DB 부하 분산 전략 고려.
